
<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Danh Mục Đầu Tư</title>
<style>
body {font-family: Arial, sans-serif; background:#f7f7f2; margin:20px;}
h1 {text-align:center; color:#e74c3c;}
.summary {margin-bottom:20px; padding:10px; background:#fff; border-radius:6px; text-align:center;}
.summary span {display:inline-block; min-width:160px; font-weight:bold; margin:5px;}
table {border-collapse: collapse; width: 100%; background:#fff;}
th, td {border: 1px solid #ddd; padding: 8px; text-align:center;}
th {background-color: #4CAF50; color: white;}
input {width:80px; text-align:right;}
.lai {color: green; font-weight:bold;}
.lo {color: red; font-weight:bold;}
</style>
</head>
<body>

<h1>DANH MỤC ĐẦU TƯ</h1>
<div class="summary">
    <span>Tổng Giá Trị: <strong id="totalValue">0</strong></span>
    <span>Tổng Lãi/Lỗ: <strong id="totalProfit">0</strong></span>
</div>

<table id="portfolio">
  <thead>
    <tr>
      <th>Mã</th>
      <th>Số lượng</th>
      <th>Giá mua</th>
      <th>Giá hiện tại</th>
      <th>Giá trị hiện tại</th>
      <th>Lãi/Lỗ</th>
      <th>%</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>VNM</td>
      <td><input type="number" value="2350"></td>
      <td><input type="number" value="58000"></td>
      <td><input type="number" value="60300"></td>
      <td class="value"></td>
      <td class="profit"></td>
      <td class="percent"></td>
    </tr>
    <tr>
      <td>SSI</td>
      <td><input type="number" value="2215"></td>
      <td><input type="number" value="40000"></td>
      <td><input type="number" value="42000"></td>
      <td class="value"></td>
      <td class="profit"></td>
      <td class="percent"></td>
    </tr>
    <tr>
      <td>BTC (Crypto)</td>
      <td><input type="number" value="0.5"></td>
      <td><input type="number" value="58000"></td>
      <td><input type="number" value="61000"></td>
      <td class="value"></td>
      <td class="profit"></td>
      <td class="percent"></td>
    </tr>
  </tbody>
</table>

<script>
function formatNumber(num){
  return num.toLocaleString('vi-VN',{maximumFractionDigits:0});
}

function calc(){
  let totalValue=0;
  let totalProfit=0;
  document.querySelectorAll("#portfolio tbody tr").forEach(row=>{
    const inputs = row.querySelectorAll("input");
    const qty  = parseFloat(inputs[0].value)||0;
    const buy  = parseFloat(inputs[1].value)||0;
    const now  = parseFloat(inputs[2].value)||0;
    const value = qty * now;
    const profit = (now - buy) * qty;
    const percent = buy>0 ? profit/(buy*qty)*100 : 0;

    row.querySelector(".value").textContent  = formatNumber(value);
    row.querySelector(".profit").textContent = formatNumber(profit);
    row.querySelector(".percent").textContent = percent.toFixed(2) + "%";

    row.querySelector(".profit").className = "profit " + (profit>=0?"lai":"lo");
    row.querySelector(".percent").className = "percent " + (profit>=0?"lai":"lo");

    totalValue += value;
    totalProfit += profit;
  });
  document.getElementById("totalValue").textContent = formatNumber(totalValue);
  const tp = document.getElementById("totalProfit");
  tp.textContent = formatNumber(totalProfit);
  tp.className = totalProfit>=0?"lai":"lo";
}

document.querySelectorAll("#portfolio input").forEach(i=>i.addEventListener("input",calc));
calc();
</script>

</body>
</html>
